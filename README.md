# BFV 二代服管机

## 使用本 BFV 二代服管机程序的服主请注意，服主是否存在违规（皇人）行为与开发组 Zygo 无关。本程序依赖于 BFV ROBOT 社区的相关服务，若发现皇服情况，请联系 BFV ROBOT 社区进行处理。

BFV 二代服管机是一款针对 BFV 服务器的管理工具，旨在提供更便捷、高效的服务器管理体验，支持服务器配置管理、自动播报、权限控制等多种功能。

## 功能特点

-   [x] 完善的权限控制系统：不再完全依赖头衔，提供更灵活的权限管理方式。
-   [x] 服务器状态与考勤管理：支持服务器上线状态监控及暖服考勤表记录，便于追踪服务器运行情况。
-   [x] 权限分级系统：实现精细化权限管控，满足不同管理场景需求。
-   [x] 稳定的查询依托：完全基于 EAcookie 查询，减少网络波动对服务器管理的影响。
-   [x] 自动化 cookie 管理：自动处理 cookie 相关事务，降低人工操作成本。
-   [x] 多场景自动播报：支持服务器自动播报及踢人播报，及时传递重要信息。
-   [x] 便捷的配置管理：通过命令系统轻松进行服务器配置的创建、更新与修改。
-   精细化超杀管理：
    -   [x] 可分别设置群友、路人、暖服成员的超杀阈值。
    -   [ ] 结算后自动将超杀玩家添加至临时黑名单，暖服时自动解除（开发中）。
    -   [ ] 支持分步战限杀、载具限杀（开发中）。
-   [ ] 玩家战绩记录：实时记录玩家单局战绩，为服务器管理提供数据支持。
-   [ ] 武器异常检测（开发中）：可自定义严格程度，自动踢出武器异常玩家（不依赖社区和 bfban）。

## 详细配置指南

### 一、服务器配置

#### 1. 创建服务器

-   **群聊创建格式**：  
    `create=序号 "中文服名" "原服名" 开服ID 不暖服限制等级 暖服限制等级 限制kd 限制kpm 非群友限杀 群友限杀 几人以下算暖服 是否为小电视`  
    示例：`create=1 "测试服" "TestServer" 1001 10 5 2.0 1.5 3 5 3 false`

-   **私聊创建格式**（需添加 QQ 群号）：  
    `create=序号 "中文服名" "原服名" 群号 开服ID 不暖服限制等级 暖服限制等级 限制kd 限制kpm 非群友限杀 群友限杀 几人以下算暖服 是否为小电视`  
    示例：`create=1 "测试服" "TestServer" 123456 1001 10 5 2.0 1.5 3 5 3 false`

-   说明：
    -   服名必须用英文引号包裹，不可使用中文引号。
    -   各参数含义：序号（自定义）、中文服名、原服名、开服 ID（网页开服唯一 ID）、不暖服限制等级（仅数字）、暖服限制等级（仅数字）、限制 kd（仅数字）、限制 kpm（仅数字）、非群友限杀（仅数字）、群友限杀（仅数字）、暖服判定人数（仅数字）、是否为小电视（true/false）。

#### 2. 更新服务器配置

-   格式：`update=序号 修改项 修改值`  
    示例：`update=1 level 15`（将序号 1 的服务器不暖服限制等级改为 15）

-   说明：

    -   若服务器处于开启状态，修改后需使用`check`命令更新信息。
    -   可修改的配置项及规范如下：

    | 配置项  | 配置名         | 规范                   |
    | ------- | -------------- | ---------------------- |
    | zh_name | 服务器中文名   | 全称（用英文引号包裹） |
    | en_name | 服务器原始名称 | 全称（用英文引号包裹） |
    | id      | ConfigID       | 网页开服唯一 ID        |
    | level   | 限制等级       | 仅数字                 |
    | kd      | 限制 KD        | 仅数字                 |
    | kpm     | 限制 KPM       | 仅数字                 |
    | nokill  | 未加群限杀     | 仅数字                 |
    | kill    | 加群限杀       | 仅数字                 |
    | warm    | 几人以下算暖服 | 仅数字                 |
    | tv      | 是否为小电视   | true/false             |

### 二、自动播报配置

#### 1. 创建播报配置

-   **群聊创建格式**：  
    `saytext=序号 [内容1][内容2][...]`  
    示例：`saytext=1 [欢迎加入测试服][当前服务器限制等级10级][请遵守服务器规则]`

-   **私聊创建格式**（需添加 QQ 群号）：  
    `saytext=序号 群号 [内容1][内容2][...]`  
    示例：`saytext=1 123456 [欢迎加入测试服][当前服务器限制等级10级]`

-   说明：
    -   序号需与对应服务器的序号一致。
    -   内容需用英文括号分段，每段最多 90 个字符，分段用于轮播展示，避免长公告。

#### 2. 更新播报配置

-   **群聊修改格式**：  
    `sayupdate=序号 修改项 修改值`  
    示例：`sayupdate=1 interval 5`（将序号 1 的播报间隔改为 5 分钟）

-   **私聊修改格式**（需添加 QQ 群号）：  
    `sayupdate=序号 群号 修改项 修改值`  
    示例：`sayupdate=1 123456 enable 0`（关闭序号 1 的播报）

-   说明：

    -   可修改的配置项及规范如下：

    | 配置项    | 配置名           | 规范                 |
    | --------- | ---------------- | -------------------- |
    | texts     | 播报内容         | [内容 1][内容2][...] |
    | warm_text | 暖服播报内容     | 仅字符，不带括号     |
    | interval  | 播报间隔（分钟） | 仅数字               |
    | enable    | 播报启用状态     | 0（关闭）/1（开启）  |

-   注：屏蔽播报和管理员发信息不受`enable`状态影响。

## 注意事项

1. 所有命令中的引号均需使用英文引号，不可使用中文引号。
2. 私聊创建/修改服务器或播报配置时，必须添加对应的 QQ 群号；群聊中操作则无需群号。
3. 服务器配置修改后，若服务器处于开启状态，需使用`check`命令更新服务器信息。

## 关于开发者与反馈

本项目来自 Zygo 群组 精心打造，致力于为 BFV 服务器管理带来更优质的体验。如果你在使用过程中遇到任何问题，或者有宝贵的建议，欢迎加入我们的 QQ 反馈群[1028746092](https://qm.qq.com/q/AYA2UyBUty)进行交流。 也欢迎进入 Zygo 大群[975809080](https://qm.qq.com/q/ZhAtavkiUq)体验该机器人的最新功能。同时，也欢迎提交 issue 或直接联系项目维护者。
